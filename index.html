<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JST AI - JSON to TOON Converter</title>
    <link rel="stylesheet" href="/src/styles.css">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="header-left">
                    <img src="/image.png" alt="JST Logo" class="app-logo">
                </div>
                <div class="header-center">
                    <h1 class="app-title">JSON to TOON Tool</h1>
                </div>
                <div class="header-actions">
                    <!-- User Profile or Sign In -->
                    <div id="userSection" class="user-section">
                        <!-- Sign in button (shown when not logged in) -->
                        <button id="googleSignInBtn" class="google-signin-btn">
                            <svg class="google-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                                <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                                <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
                                <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                            </svg>
                            Sign in with Google
                        </button>
                        
                        <!-- User profile (shown when logged in) -->
                        <div id="userProfile" class="user-profile" style="display: none;">
                            <img id="userAvatar" class="user-avatar" alt="User" />
                            <span id="userName" class="user-name"></span>
                            <button id="logoutBtn" class="header-btn logout-btn">Logout</button>
                        </div>
                    </div>
                    
                    <button id="faqToggle" class="header-btn" aria-label="FAQ">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/>
                        </svg>
                        FAQ
                    </button>
                    <button id="contactToggle" class="header-btn" aria-label="Contact">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                            <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                        </svg>
                        Contact
                    </button>
                    <button id="themeToggle" class="theme-toggle" aria-label="Toggle theme">
                        <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"/>
                        </svg>
                        <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <div class="editor-grid">
                <!-- JSON Input -->
                <div class="editor-panel">
                    <div class="panel-header">
                        <span class="panel-title">JSON (JavaScript Object Notation) Input</span>
                        <div class="panel-actions">
                            <input type="file" id="fileInput" accept=".json,.csv,.xlsx" style="display: none;">
                            <button id="uploadBtn" class="btn-ghost" title="Upload JSON, CSV, or XLSX file">
                                <svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
                                </svg>
                                Upload
                            </button>
                            <button id="viewToggleBtn" class="btn-ghost" style="display: none;" title="Toggle between JSON and Table view">
                                <svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/>
                                </svg>
                                Table
                            </button>
                            <button id="clearInput" class="btn-ghost">Clear</button>
                        </div>
                    </div>
                    <div class="file-info" id="fileInfo" style="display: none;"></div>
                    <div class="table-view-container" id="tableViewContainer" style="display: none;"></div>
                    <div class="editor-wrapper">
                        <div class="line-numbers" id="jsonLineNumbers"></div>
                        <textarea
                            id="jsonInput"
                            class="code-editor"
                            placeholder="Paste your JSON here or upload a file (JSON, CSV, XLSX)..."
                            spellcheck="false"
                        ></textarea>
                    </div>
                </div>

                <!-- TOON Output -->
                <div class="editor-panel">
                    <div class="panel-header">
                        <span class="panel-title">TOON (Token Optimized Object Notation)</span>
                        <div class="panel-actions">
                            <button id="downloadBtn" class="btn-ghost btn-download" disabled title="Download as .txt">
                                <svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                </svg>
                                Download
                            </button>
                            <button id="copyOutput" class="btn-ghost" disabled>Copy</button>
                        </div>
                    </div>
                    <div class="editor-wrapper">
                        <div class="line-numbers" id="toonLineNumbers"></div>
                        <pre id="toonOutput" class="code-output">Your optimized TOON output will appear here...</pre>
                    </div>
                </div>
            </div>

            <!-- Error Message -->
            <div class="error-container" id="errorMessage"></div>

            <!-- Action Bar -->
            <div class="action-bar">
                <div class="action-info">
                    <kbd>Ctrl</kbd> + <kbd>Enter</kbd> to convert
                </div>
                <button id="convertBtn" class="btn-primary">
                    <span id="btnText">Convert to TOON</span>
                    <svg id="btnIcon" class="btn-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
                    </svg>
                    <svg id="loadingSpinner" class="btn-spinner" width="20" height="20" viewBox="0 0 24 24" fill="none" style="display: none;">
                        <circle class="spinner-track" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="spinner-path" d="M12 2a10 10 0 0 1 10 10" stroke="currentColor" stroke-width="4" stroke-linecap="round"></path>
                    </svg>
                </button>
                <!-- Mobile Redo Button (shown after conversion) -->
                <button id="redoBtn" class="btn-redo-mobile">
                    <span>Redo Conversion</span>
                    <svg class="btn-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"/>
                    </svg>
                </button>
            </div>

            <!-- Metrics -->
            <div class="metrics-container">
                <div class="metric-item">
                    <span class="metric-label">JSON Tokens</span>
                    <span class="metric-value" id="jsonTokens">0</span>
                </div>
                <div class="metric-divider"></div>
                <div class="metric-item">
                    <span class="metric-label">TOON Tokens</span>
                    <span class="metric-value" id="toonTokens">0</span>
                </div>
                <div class="metric-divider"></div>
                <div class="metric-item metric-highlight">
                    <span class="metric-label">Saved</span>
                    <span class="metric-value" id="tokensSaved">0</span>
                </div>
                <div class="metric-divider"></div>
                <div class="metric-item metric-highlight">
                    <span class="metric-label">Reduction</span>
                    <span class="metric-value" id="reductionPercent">0%</span>
                </div>
            </div>
        </main>

        <!-- FAQ Slide Panel -->
        <div class="slide-panel slide-panel-left" id="faqPanel">
            <div class="slide-panel-header">
                <h2 class="slide-panel-title">Frequently Asked Questions</h2>
                <button class="slide-panel-close" id="faqClose" aria-label="Close FAQ">
                    <svg width="24" height="24" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
                    </svg>
                </button>
            </div>
            <div class="slide-panel-content">
                <div class="faq-grid">
                    <div class="faq-item">
                        <h3 class="faq-question">What is TOON format?</h3>
                        <p class="faq-answer">TOON (Token Optimized Object Notation) is a CSV-like format that reduces token usage by 40-70% compared to JSON, making it perfect for AI applications and LLMs.</p>
                    </div>
                    <div class="faq-item">
                        <h3 class="faq-question">Do I need to sign in to use this tool?</h3>
                        <p class="faq-answer">No! You can convert JSON to TOON and copy the results without signing in. However, signing in with Google unlocks the download feature to save your conversions as files.</p>
                    </div>
                    <div class="faq-item">
                        <h3 class="faq-question">What file formats are supported?</h3>
                        <p class="faq-answer">We support JSON, CSV, and XLSX files. Upload any of these formats and convert them to token-efficient TOON format instantly.</p>
                    </div>
                    <div class="faq-item">
                        <h3 class="faq-question">Is my data secure?</h3>
                        <p class="faq-answer">Yes! All conversions happen on our secure backend. We use Google OAuth for authentication and don't store your conversion data permanently.</p>
                    </div>
                    <div class="faq-item">
                        <h3 class="faq-question">Can I use this on mobile?</h3>
                        <p class="faq-answer">Absolutely! The tool is fully responsive and optimized for mobile devices. On smaller screens, you'll see a streamlined single-column layout for the best experience.</p>
                    </div>
                    <div class="faq-item">
                        <h3 class="faq-question">What happens when I log in or out?</h3>
                        <p class="faq-answer">For your security, the conversion results are cleared when you log in or out. Simply re-convert your JSON to see the results again.</p>
                    </div>
                    <div class="faq-item">
                        <h3 class="faq-question">Can I use this for large datasets?</h3>
                        <p class="faq-answer">Yes! The tool supports files up to 1M tokens. For larger datasets, consider splitting them into smaller chunks for optimal performance.</p>
                    </div>
                    <div class="faq-item">
                        <h3 class="faq-question">How do I download my converted files?</h3>
                        <p class="faq-answer">Sign in with Google to unlock the download feature. Once signed in, you'll see the download button enabled after each conversion, allowing you to save results as .txt files.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact Slide Panel -->
        <div class="slide-panel slide-panel-right" id="contactPanel">
            <div class="slide-panel-header">
                <h2 class="slide-panel-title">Get In Touch</h2>
                <button class="slide-panel-close" id="contactClose" aria-label="Close Contact">
                    <svg width="24" height="24" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
                    </svg>
                </button>
            </div>
            <div class="slide-panel-content">
                <p class="section-description">Have questions or feedback? I'd love to hear from you!</p>
                <form class="contact-form" id="contactForm">
                    <div class="form-group">
                        <label for="contactName">Name</label>
                        <input type="text" id="contactName" name="name" required placeholder="John Doe">
                    </div>
                    <div class="form-group">
                        <label for="contactEmail">Email</label>
                        <input type="email" id="contactEmail" name="email" required placeholder="john@example.com">
                    </div>
                    <div class="form-group">
                        <label for="contactPhone">Phone <span class="optional">(Optional)</span></label>
                        <input type="tel" id="contactPhone" name="phone" placeholder="+1 (555) 123-4567">
                    </div>
                    <div class="form-group">
                        <label for="contactMessage">Message</label>
                        <textarea id="contactMessage" name="message" required rows="5" placeholder="Tell me about your experience with the tool, ask a question, or share your feedback..."></textarea>
                    </div>
                    <button type="submit" class="btn-primary btn-submit" id="submitContactBtn">
                        <span id="submitBtnText">Send Message</span>
                        <svg id="submitBtnIcon" class="btn-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"/>
                        </svg>
                        <svg id="submitSpinner" class="btn-spinner" width="20" height="20" viewBox="0 0 24 24" fill="none" style="display: none;">
                            <circle class="spinner-track" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="spinner-path" d="M12 2a10 10 0 0 1 10 10" stroke="currentColor" stroke-width="4" stroke-linecap="round"></path>
                        </svg>
                    </button>
                    <div class="form-message" id="formMessage"></div>
                </form>
                
                <!-- Success Animation (inside panel) -->
                <div class="success-overlay-panel" id="successOverlay">
                    <div class="success-animation">
                        <svg class="success-checkmark" viewBox="0 0 52 52">
                            <circle class="success-checkmark-circle" cx="26" cy="26" r="25" fill="none"/>
                            <path class="success-checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
                        </svg>
                        <p class="success-message">Message Sent Successfully!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Panel Overlay -->
        <div class="panel-overlay" id="panelOverlay"></div>

        <!-- Footer -->
        <footer class="app-footer">
            <span class="footer-text">Made with ❤️ by Tirth Shah</span>
            <div class="footer-links">
                <a href="https://github.com/Tirth-1999" target="_blank" rel="noopener noreferrer" title="GitHub" class="footer-link">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
                    </svg>
                    GitHub
                </a>
                <span class="footer-separator">•</span>
                <a href="https://www.linkedin.com/in/tirth-chirayu-shah/" target="_blank" rel="noopener noreferrer" title="LinkedIn" class="footer-link">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                    </svg>
                    LinkedIn
                </a>
                <span class="footer-separator">•</span>
                <a href="https://tirthcshah.me/" target="_blank" rel="noopener noreferrer" title="Portfolio" class="footer-link">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z"/>
                    </svg>
                    Portfolio
                </a>
            </div>
        </footer>
    </div>

    <script type="module" src="/src/main.ts"></script>
</body>
</html>
